<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Quiz</title>

    <!-- Zapewnij poprawne skalowanie na urządzeniach mobilnych -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap 5 (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      /* DARK MODE i podstawowe style */
      body {
        background-color: #121212;
        color: #ffffff;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        /* Nieco większa czcionka dla lepszej czytelności na telefonach */
        font-size: 1.1rem;
      }

      .quiz-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 1rem;
      }

      .question-card {
        background-color: #1e1e1e;
        border: 1px solid #333;
        border-radius: 0.5rem;
        margin-bottom: 1rem;
        padding: 1.25rem;
      }

      .question-title {
        font-weight: bold;
        margin-bottom: 0.5rem;
      }

      .form-check-label {
        font-size: 1rem;
      }

      /* Kolorowanie odpowiedzi po wyborze/sprawdzeniu */
      .correct {
        color: #00ff00 !important; /* zielony */
      }

      .incorrect {
        color: #ff0000 !important; /* czerwony */
      }

      /* Wyłączone kontrolki */
      input[disabled] {
        cursor: not-allowed;
      }

      .score-board {
        position: fixed;
        top: 1rem;
        right: 1rem;
        background-color: #333;
        padding: 0.3rem 0.6rem;
        border-radius: 0.5rem;
        font-size: 1rem; /* jeszcze większa czcionka licznika */
      }

      /* Lista punktowana */
      .question-list {
        margin: 0.75rem 0;
      }
      .question-list li {
        margin-bottom: 0.25rem;
      }
    </style>
  </head>
  <body>
    <!-- Pasek wyświetlający obecny wynik (stała pozycja) -->
    <div class="score-board" id="scoreBoard">Wynik: 0 / 0</div>

    <div class="quiz-container">
      <!-- Wyśrodkowany tytuł "Quiz" -->
      <h1 class="text-center mb-4">Quiz</h1>

      <!-- Kontener, do którego wstawimy wygenerowane pytania -->
      <div id="quizContent"></div>
    </div>

    <!-- JSON z przykładowymi pytaniami -->
    <script>
      const quizData = {
        questions: [
          {
            questionId: 1,
            type: "single",
            question:
              "Z powodu wdrożonych kontroli bezpieczeństwa użytkownik może uzyskać dostęp tylko do serwera z FTP. Który komponent AAA to zapewni?",
            image: null,
            list: null,
            answers: [
              { text: "dostępność", correct: false },
              { text: "niezawodność", correct: false },
              { text: "ewidencjonowanie", correct: false },
              { text: "autoryzacja", correct: true },
              { text: "audyt", correct: false },
              { text: "uwierzytelnianie", correct: false },
            ],
          },
          {
            questionId: 2,
            type: "single",
            question:
              "Jaki rodzaj ataku może wiązać się z wykorzystaniem narzędzi, takich jak nslookup i fping?",
            image: null,
            list: null,
            answers: [
              { text: "atak w celu uzyskania dostępu", correct: false },
              { text: "atak rozpoznania", correct: true },
              { text: "atak robaka", correct: false },
              { text: "atak trojana", correct: false },
              { text: "odmowa usługi (DoS)", correct: false },
              { text: "rozproszona odmowa usługi (DDoS)", correct: false },
            ],
          },
          {
            questionId: 3,
            type: "single",
            question:
              "Ze względów bezpieczeństwa administrator sieci musi zagwarantować, że lokalne komputery nie mogą komunikować się ze sobą za pomocą pakietów ping. Które ustawienia pomogą wykonać to zadanie?",
            image: null,
            list: null,
            answers: [
              { text: "ustawienia systemu plików", correct: false },
              { text: "ustawienia interfejsów", correct: false },
              { text: "ustawienia adresów MAC", correct: false },
              { text: "ustawienia zapory", correct: true },
              { text: "ustawienia AAA", correct: false },
            ],
          },
          {
            questionId: 4,
            type: "single",
            question:
              "Użytkownicy sieci są zobowiązani do wprowadzenia poświadczeń nazwy użytkownika i hasła, które zostaną zweryfikowane przez serwer. Który serwer zapewniłby taką usługę?",
            image: null,
            list: null,
            answers: [
              { text: "AAA", correct: false },
              { text: "NAT", correct: false },
              { text: "SNMP", correct: false },
              { text: "RADIUS", correct: true },
              { text: "TACACS+", correct: false },
              { text: "802.1X", correct: false },
            ],
          },
          {
            questionId: 5,
            type: "single",
            question:
              "Jakie korzyści w zakresie bezpieczeństwa daje włączenie BPDU guard na interfejsach obsługujących PortFast?",
            image: null,
            list: null,
            answers: [
              {
                text: "zapobieganie dotarciu obcych przełączników do sieci",
                correct: true,
              },
              { text: "ochrona przed pętlami warstwy 2", correct: false },
              {
                text: "egzekwowanie lokalizacji mostów głównych",
                correct: false,
              },
              {
                text: "zapobieganie atakom przepełnienia bufora",
                correct: false,
              },
              { text: "Opcja 2", correct: false },
            ],
          },
          {
            questionId: 6,
            type: "single",
            question:
              "Jeśli chodzi o bezpieczeństwo, która warstwa OSI jest uważana za najsłabsze ogniwo w systemie sieciowym?",
            image: null,
            list: null,
            answers: [
              { text: "warstwa 1", correct: false },
              { text: "warstwa 2", correct: true },
              { text: "warstwa 3", correct: false },
              { text: "warstwa 4", correct: false },
              { text: "warstwa 5", correct: false },
            ],
          },
          {
            questionId: 7,
            type: "single",
            question:
              "Administrator sieci konfiguruje zabezpieczenia portu na przełączniku. Polityka bezpieczeństwa firmy określa, że w przypadku naruszenia należy odrzucać pakiety o nieznanych adresach źródłowych i nie wysyłać żadnych powiadomień. Który tryb naruszenia powinien być skonfigurowany na interfejsach?",
            image: null,
            list: null,
            answers: [
              { text: "off", correct: false },
              { text: "restrict", correct: false },
              { text: "protect", correct: true },
              { text: "shutdown", correct: false },
            ],
          },
          {
            questionId: 8,
            type: "single",
            question:
              "Administrator sieci konfiguruje DAI na przełączniku za pomocą polecenia ip arp inspection validate src-mac. Jaki jest cel tego polecenia konfiguracyjnego?",
            image: null,
            list: null,
            answers: [
              {
                text: "Sprawdza źródłowy adres MAC w nagłówku Ethernet z tablicą adresów MAC.",
                correct: false,
              },
              {
                text: "Sprawdza źródłowy adres MAC w nagłówku Ethernet pod kątem skonfigurowanych przez użytkownika list ACL dla ARP.",
                correct: false,
              },
              {
                text: "Sprawdza źródłowy adres MAC w nagłówku Ethernet z docelowym adresem MAC w treści ARP.",
                correct: false,
              },
              {
                text: "Sprawdza źródłowy adres MAC w nagłówku Ethernet z adresem MAC nadawcy w treści ARP.",
                correct: true,
              },
            ],
          },
          {
            questionId: 9,
            type: "single",
            question:
              "Który komponent ma chronić przed nieautoryzowaną komunikacją do i z komputera?",
            image: null,
            list: null,
            answers: [
              { text: "program antywirusowy", correct: false },
              { text: "firewall", correct: true },
              { text: "skaner portów", correct: false },
              { text: "antymalware", correct: false },
              { text: "centrum zabezpieczeń", correct: false },
            ],
          },
          {
            questionId: 10,
            type: "multiple",
            question:
              "Które dwa rozwiązania Cisco pomagają zapobiegać atakom zagłodzenia DHCP?",
            image: null,
            list: null,
            answers: [
              { text: "Zabezpieczenie portu", correct: true },
              { text: "IP Source Guard", correct: false },
              { text: "DHCP Snooping", correct: true },
              { text: "Web Security", correct: false },
              { text: "Dynamiczna inspekcja ARP", correct: false },
            ],
          },
          {
            questionId: 11,
            type: "single",
            question:
              "Jaki plan ograniczania skutków jest najlepszy, aby udaremnić atak DoS, który powoduje przepełnienie tablic adresów MAC?",
            image: null,
            list: null,
            answers: [
              { text: "Wyłącz DTP.", correct: false },
              { text: "Wyłącz VTP.", correct: false },
              { text: "Włącz zabezpieczenia portu.", correct: true },
              { text: "Wyłącz STP.", correct: false },
              {
                text: "Umieść nieużywane porty w nieużywanej sieci VLAN.",
                correct: false,
              },
              { text: "Włącz BPDU.", correct: false },
            ],
          },
          {
            questionId: 12,
            type: "single",
            question:
              "Spójrz na rysunek. Port Fa0/2 został już prawidłowo skonfigurowany. Telefon IP i komputer PC działają prawidłowo. Która z wymienionych konfiguracji portu Fa0/2 przełącznika będzie najbardziej odpowiednia dla administratora sieci, aby spełnić cele bezpieczeństwa?",
            image: null,
            list: [
              "Nikt nie może odłączyć telefonu IP ani komputera PC lub podłączyć inne przewodowe urządzenia.",
              "Jeśli inne urządzenie zostało podłączone, to port Fa0/2 powinien zostać wyłączony.",
              "Adresy MAC telefonu IP i komputera powinny zostać automatycznie wykryte przez przełącznik i dodane do bieżącej konfiguracji.",
            ],
            answers: [
              {
                text: "SWA(config-if)# switchport port-security\nSWA(config-if)# switchport port-security mac-address sticky",
                correct: false,
              },
              {
                text: "SWA(config-if)# switchport port-security mac-address sticky\nSWA(config-if)# switchport port-security maximum 2",
                correct: false,
              },
              {
                text: "SWA(config-if)# switchport port-security\nSWA(config-if)# switchport port-security maximum 2\nSWA(config-if)# switchport port-security mac-address sticky",
                correct: false,
              },
              {
                text: "SWA(config-if)# switchport port-security\nSWA(config-if)# switchport port-security maximum 2\nSWA(config-if)# switchport port-security mac-address sticky switchport\nSWA(config-if)# port security violation restrict",
                correct: true,
              },
            ],
          },
          {
            questionId: 13,
            type: "single",
            question:
              "Zabezpieczenie portu zostało skonfigurowane na interfejsie Fa 0/12 przełącznika S1. Jakie działanie nastąpi, gdy PC1 jest dołączony do przełącznika S1 z zastosowaną konfiguracją?",
            image: null,
            list: null,
            answers: [
              {
                text: "Ramki z PC1 zostaną usunięte i zostanie utworzony komunikat dziennika.",
                correct: false,
              },
              {
                text: "Ramki z PC1 zostaną odrzucone i nie będzie żadnego dziennika naruszenia.",
                correct: false,
              },
              {
                text: "Ramki z PC1 spowodują natychmiastowe zamknięcie interfejsu i zostanie wprowadzony wpis dziennika.",
                correct: true,
              },
              {
                text: "Ramki z PC1 zostaną przekazane do miejsca docelowego i zostanie utworzony wpis dziennika.",
                correct: false,
              },
              {
                text: "Ramki z PC1 zostaną przekazane do miejsca docelowego, ale wpis dziennika nie zostanie utworzony.",
                correct: false,
              },
              {
                text: "Ramki z PC1 zostaną przesłane dalej, ponieważ brakuje polecenia switchport port-security violation.",
                correct: false,
              },
            ],
          },
          {
            questionId: 14,
            type: "multiple",
            question: "Które trzy usługi świadczone są w ramach AAA?",
            image: null,
            list: null,
            answers: [
              { text: "ewidencjonowanie", correct: true },
              { text: "niezawodność", correct: false },
              { text: "autoryzacja", correct: true },
              { text: "integralność danych", correct: false },
              { text: "uwierzytelnianie", correct: true },
            ],
          },
          {
            questionId: 15,
            type: "single",
            question:
              "Która usługa jest domyślnie włączona na przełączniku, a która może ujawnić znaczące informacje o routerze i potencjalnie uczynić go bardziej podatnym na ataki?",
            image: null,
            list: null,
            answers: [
              { text: "FTP", correct: false },
              { text: "LLDP", correct: false },
              { text: "HTTP", correct: false },
              { text: "TFTP", correct: false },
              { text: "CDP", correct: true },
              { text: "NLDP", correct: false },
            ],
          },
          {
            questionId: 16,
            type: "single",
            question:
              "Który atak warstwy 2 spowoduje, że uprawnieni użytkownicy nie otrzymają prawidłowych adresów IP?",
            image: null,
            list: null,
            answers: [
              { text: "fałszowanie adresów IP", correct: false },
              { text: "fałszowanie ARP", correct: false },
              { text: "fałszowanie adresów MAC", correct: false },
              { text: "zalewanie adresami MAC", correct: false },
              { text: "zagłodzenie DHCP", correct: true },
            ],
          },
          {
            questionId: 17,
            type: "single",
            question:
              "Jaki może być cel ewidencjonowania jako funkcji bezpieczeństwa sieciowego?",
            image: null,
            list: null,
            answers: [
              { text: "do śledzenia działań użytkownika", correct: true },
              { text: "do śledzenia działań aplikacji", correct: false },
              {
                text: "wymaga od użytkowników aby udowodnili, że są tymi za których się podają",
                correct: false,
              },
              {
                text: "do dostarczania funkcjonalności zapytań i odpowiedzi",
                correct: false,
              },
              {
                text: "do określenia, do których zasobów użytkownicy mają mieć dostęp",
                correct: false,
              },
            ],
          },
          {
            questionId: 18,
            type: "multiple",
            question:
              "Jakie trzy kroki konfiguracyjne muszą być wykonane, aby wdrożyć dostęp SSH do routera?",
            image: null,
            list: null,
            answers: [
              { text: "ustawić unikalne hasło", correct: false },
              { text: "ustawić unikalną nazwę hosta", correct: true },
              { text: "ustawić nazwę domeny IP", correct: true },
              { text: "dodać konto użytkownika", correct: true },
              { text: "ustawić hasło trybu uprzywilejowanego", correct: false },
              { text: "ustawić hasło na linii konsoli", correct: false },
            ],
          },
          {
            questionId: 19,
            type: "multiple",
            question: "Jakie trzy techniki ograniczania ataków VLAN?",
            image: null,
            list: null,
            answers: [
              { text: "Wyłącz DTP.", correct: true },
              { text: "Włącz trunk ręcznie.", correct: true },
              { text: "Zmień VLAN natywny na nieużywany.", correct: true },
              { text: "Włącz BPDU guard.", correct: false },
              { text: "Włącz Source Guard.", correct: false },
              { text: "Użyj przypisanych sieci VLAN.", correct: false },
            ],
          },
          {
            questionId: 20,
            type: "single",
            question:
              "Jakiemu rodzajowi ataku z przeskokiem VLAN można zapobiec, wyznaczając nieużywaną sieć VLAN jako natywną sieć VLAN?",
            image: null,
            list: null,
            answers: [
              { text: "fałszowanie DTP", correct: false },
              { text: "fałszowanie DHCP", correct: false },
              { text: "podwójne znakowanie VLAN", correct: true },
              { text: "zagłodzenie DHCP", correct: false },
            ],
          },
        ],
      };
    </script>

    <script>
      function shuffleArray(array) {
        const shuffledArray = array.slice(); // Tworzy kopię oryginalnej tablicy
        for (let i = shuffledArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffledArray[i], shuffledArray[j]] = [
            shuffledArray[j],
            shuffledArray[i],
          ];
        }
        return shuffledArray;
      }

      document.addEventListener("DOMContentLoaded", () => {
        const quizContent = document.getElementById("quizContent");
        const scoreBoard = document.getElementById("scoreBoard");

        let totalQuestions = quizData.questions.length;
        let currentScore = 0;

        // Ustaw wynik początkowy
        scoreBoard.textContent = `Wynik: ${currentScore} / ${totalQuestions}`;

        shuffleArray(quizData.questions).forEach((qData, index) => {
          const card = document.createElement("div");
          card.classList.add("question-card");

          // Numer i treść pytania
          const questionNumber = document.createElement("h5");
          questionNumber.classList.add("question-title");
          questionNumber.textContent = `Pytanie ${index + 1}:`;
          card.appendChild(questionNumber);

          const questionText = document.createElement("p");
          questionText.textContent = qData.question;
          card.appendChild(questionText);

          // Obrazek (jeśli istnieje)
          if (qData.image) {
            const img = document.createElement("img");
            img.src = qData.image;
            img.alt = "Obrazek do pytania";
            img.classList.add("img-fluid", "my-2", "d-block", "mx-auto");
            card.appendChild(img);
          }

          // Lista punktowana (jeśli istnieje)
          if (qData.list && Array.isArray(qData.list)) {
            const ul = document.createElement("ul");
            ul.classList.add("question-list");
            qData.list.forEach((item) => {
              const li = document.createElement("li");
              li.textContent = item;
              ul.appendChild(li);
            });
            card.appendChild(ul);
          }

          // Kontener na odpowiedzi
          const answersContainer = document.createElement("div");
          answersContainer.classList.add("answers-container");

          // Radio lub checkbox (w zależności od "type")
          const inputType = qData.type === "multiple" ? "checkbox" : "radio";
          const nameForInputs = `question_${qData.questionId}`;

          qData.answers.forEach((ans, ansIndex) => {
            const input = document.createElement("input");
            input.classList.add("form-check-input");
            input.type = inputType;
            input.name = nameForInputs;
            input.value = ansIndex;
            input.id = `question_${qData.questionId}_answer_${ansIndex}`; // Dodaj unikalny identyfikator

            const label = document.createElement("label");
            label.classList.add("form-check-label");
            label.textContent = ans.text;
            label.htmlFor = input.id; // Powiąż etykietę z inputem

            const answerWrapper = document.createElement("div");
            answerWrapper.classList.add("form-check", "mb-1");
            answerWrapper.appendChild(input);
            answerWrapper.appendChild(label);
            answersContainer.appendChild(answerWrapper);
          });

          card.appendChild(answersContainer);

          // Guzik "Sprawdź" – tylko dla pytań wielokrotnego wyboru
          let checkButton = null;
          if (qData.type === "multiple") {
            checkButton = document.createElement("button");
            checkButton.textContent = "Sprawdź";
            checkButton.classList.add("btn", "btn-primary", "mt-2");
            card.appendChild(checkButton);
          }

          // Logika dla pytań jednokrotnego wyboru (radio)
          if (qData.type === "single") {
            answersContainer
              .querySelectorAll("input[type='radio']")
              .forEach((radio) => {
                radio.addEventListener("change", () => {
                  // Zablokuj wszystkie radio w tym pytaniu
                  answersContainer
                    .querySelectorAll("input[type='radio']")
                    .forEach((r) => {
                      r.disabled = true;
                    });

                  // Indeks wybranej odpowiedzi
                  const selectedIndex = parseInt(radio.value);

                  // Oznacz poprawne i niepoprawne
                  qData.answers.forEach((ans, i) => {
                    const label = answersContainer.querySelectorAll("label")[i];
                    if (ans.correct) {
                      label.classList.add("correct");
                    }
                    if (i === selectedIndex && !ans.correct) {
                      label.classList.add("incorrect");
                    }
                  });

                  // Jeśli trafione, zwiększ wynik
                  if (qData.answers[selectedIndex].correct) {
                    currentScore++;
                  }
                  scoreBoard.textContent = `Wynik: ${currentScore} / ${totalQuestions}`;
                });
              });
          }
          // Logika dla pytań wielokrotnego wyboru (checkbox + guzik "Sprawdź")
          else {
            checkButton.addEventListener("click", () => {
              checkButton.disabled = true;
              const checkboxes = answersContainer.querySelectorAll(
                "input[type='checkbox']"
              );
              let isAllCorrect = true;

              qData.answers.forEach((ans, i) => {
                const checkbox = checkboxes[i];
                const label = answersContainer.querySelectorAll("label")[i];

                // Sprawdź i oznacz poprawne/niepoprawne
                if (checkbox.checked && !ans.correct) {
                  isAllCorrect = false;
                  label.classList.add("incorrect");
                }
                if (!checkbox.checked && ans.correct) {
                  isAllCorrect = false;
                  label.classList.add("correct");
                }
                if (checkbox.checked && ans.correct) {
                  label.classList.add("correct");
                }

                // Wyłącz checkbox, żeby nie można było zmienić odpowiedzi
                checkbox.disabled = true;
              });

              // Dodaj punkt tylko jeśli wszystko zaznaczono idealnie
              if (isAllCorrect) {
                currentScore++;
              }
              scoreBoard.textContent = `Wynik: ${currentScore} / ${totalQuestions}`;
            });
          }

          quizContent.appendChild(card);
        });
      });
    </script>

    <!-- Bootstrap JS (jeśli potrzebujesz np. dropdownów, modali itp.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
